import {
  RadioButton,
  RadioGroup,
  AsyncDatatable,
} from "@vivakits/react-components";
import { Tabs } from "nextra/components";
import { rawDataTableData } from "../../libs/data.ts";
import { useState } from "react";
import { DropdownIcon } from "../../components/assets/icons.tsx";

# Asynchronous Datatable

The Asynchronous Datatable component is designed to streamline the process of rendering HTML tables in your web applications. This datatable component offers a rich set of features to enhance the presentation and interactivity of your data.

### Basic Usage

The asynchronous datatable has some required props that must be passed to generate the basic datatable. Here is a sample example:

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableBasic = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

const [dataTableDataSource, setDataTableDataSource] = useState([
...rawDataTableData,
]);

return (
  <AsyncDatatable
    columnDefinitions={dataTableColumns}
    dataSource={dataTableDataSource}
  />
); };

<AsyncDataTableBasic />
</Tabs.Tab>

  <Tabs.Tab>
```jsx copy
const dataTableColumns = [
  {
    title: "Name",
    dataIndex: "name",
  },
  {
    title: "Position",
    dataIndex: "position",
    align: "center",
  },
  {
    title: "Age",
    dataIndex: "age",
  },
  {
    title: "Start Date",
    dataIndex: "start_date",
  },
  {
    title: "Salary",
    dataIndex: "salary",
  }
];

const dataTableDataSource = [
  {
    name: "Humfrey Scain",
    position: "Construction Foreman",
    office: "Micheng",
    age: 40,
    start_date: "08/10/2023",
    salary: "150,000",
  },
  {
    name: "Jeane Sherland",
    position: "Electrician",
    office: "Donskoye",
    age: 38,
    start_date: "12/12/2023",
    salary: "140,000",
  },
  {
    name: "Merrie Van Son",
    position: "Construction Worker",
    office: "Yanqul",
    age: 37,
    start_date: "30/06/2023",
    salary: "110,000",
  },
  {
    name: "Myrtia Fitchell",
    position: "Project Manager",
    office: "Mabuttal East",
    age: 35,
    start_date: "09/04/2024",
    salary: "110,000",
  },
  {
    name: "Betty Giannotti",
    position: "Construction Worker",
    office: "Hetang",
    age: 30,
    start_date: "10/02/2024",
    salary: "140,000",
  },
  {
    name: "Alfy Kirimaa",
    position: "Estimator",
    office: "Esquipulas",
    age: 27,
    start_date: "05/08/2023",
    salary: "95,000",
  },
  {
    name: "Arte Gledhall",
    position: "Construction Manager",
    office: "Yabrūd",
    age: 28,
    start_date: "23/04/2023",
    salary: "90,000",
  },
  {
    name: "Ardene Beckensall",
    position: "Supervisor",
    office: "Thị Trấn Thanh Lưu",
    age: 26,
    start_date: "07/08/2023",
    salary: "100,000",
  },
  {
    name: "Allsun Johnstone",
    position: "Project Manager",
    office: "Liujiage",
    age: 29,
    start_date: "15/07/2023",
    salary: "80,000",
  },
  {
    name: "Leigha Tattersill",
    position: "Estimator",
    office: "Libao",
    age: 29,
    start_date: "02/06/2023",
    salary: "80,000",
  },
];

<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Bordered Table
Async Datatable has border support. It has two seperate props for handling horizontal border and vertical border. If you pass `horizontalBorder` or `verticalBorder` then you can see the respective borders accordingly. 

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableBordered = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

const [dataTableDataSource, setDataTableDataSource] = useState([
...rawDataTableData,
]);

return (
  <AsyncDatatable
    columnDefinitions={dataTableColumns}
    dataSource={dataTableDataSource}
    horizontalBorder
    verticalBorder
  />
); };

<AsyncDataTableBordered />
</Tabs.Tab>

  <Tabs.Tab>
```jsx copy
const dataTableColumns = [
  {
    title: "Name",
    dataIndex: "name",
  },
  {
    title: "Position",
    dataIndex: "position",
    align: "center",
  },
  {
    title: "Age",
    dataIndex: "age",
  },
  {
    title: "Start Date",
    dataIndex: "start_date",
  },
  {
    title: "Salary",
    dataIndex: "salary",
  }
];

const dataTableDataSource = [
  {
    name: "Humfrey Scain",
    position: "Construction Foreman",
    office: "Micheng",
    age: 40,
    start_date: "08/10/2023",
    salary: "150,000",
  },
  {
    name: "Jeane Sherland",
    position: "Electrician",
    office: "Donskoye",
    age: 38,
    start_date: "12/12/2023",
    salary: "140,000",
  },
  {
    name: "Merrie Van Son",
    position: "Construction Worker",
    office: "Yanqul",
    age: 37,
    start_date: "30/06/2023",
    salary: "110,000",
  },
  {
    name: "Myrtia Fitchell",
    position: "Project Manager",
    office: "Mabuttal East",
    age: 35,
    start_date: "09/04/2024",
    salary: "110,000",
  },
  {
    name: "Betty Giannotti",
    position: "Construction Worker",
    office: "Hetang",
    age: 30,
    start_date: "10/02/2024",
    salary: "140,000",
  },
  {
    name: "Alfy Kirimaa",
    position: "Estimator",
    office: "Esquipulas",
    age: 27,
    start_date: "05/08/2023",
    salary: "95,000",
  },
  {
    name: "Arte Gledhall",
    position: "Construction Manager",
    office: "Yabrūd",
    age: 28,
    start_date: "23/04/2023",
    salary: "90,000",
  },
  {
    name: "Ardene Beckensall",
    position: "Supervisor",
    office: "Thị Trấn Thanh Lưu",
    age: 26,
    start_date: "07/08/2023",
    salary: "100,000",
  },
  {
    name: "Allsun Johnstone",
    position: "Project Manager",
    office: "Liujiage",
    age: 29,
    start_date: "15/07/2023",
    salary: "80,000",
  },
  {
    name: "Leigha Tattersill",
    position: "Estimator",
    office: "Libao",
    age: 29,
    start_date: "02/06/2023",
    salary: "80,000",
  },
];

<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
  horizontalBorder
  verticalBorder
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Stripped Table
The `stripped` feature of our Async DataTable component allows you to enhance the visual clarity of your tables by alternating the background color of rows, creating a stripped effect. This can improve readability, especially when dealing with large datasets. You can override the default stripe color by passing a color code through `stripeColor` prop

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableStripped = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

const [dataTableDataSource, setDataTableDataSource] = useState([
...rawDataTableData,
]);

return (
  <AsyncDatatable
    columnDefinitions={dataTableColumns}
    dataSource={dataTableDataSource}
    horizontalBorder
    verticalBorder
    stripped
    stripeColor="#f0f5ff"
  />
); };

<AsyncDataTableStripped />
</Tabs.Tab>

  <Tabs.Tab>
```jsx copy
<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
  horizontalBorder
  verticalBorder
  stripped
  stripeColor="#f0f5ff"
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Table with Entries Component
The Entries component within the Async Datatable provides users with how many rows are being displayed in the table. It is mandatory to pass the callback function `handleNoOfEntriesChange` to render this component. There are some optional props that can be passed for customizing this component. For Example: `entriesHeader`, `defaultEntries`, `entriesArray`


<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableEntries = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

const [dataTableDataSource, setDataTableDataSource] = useState([
...rawDataTableData,
]);

return (
  <AsyncDatatable
    columnDefinitions={dataTableColumns}
    dataSource={dataTableDataSource}
    horizontalBorder
    defaultEntries={10}
    handleNoOfEntriesChange={(value) => {console.log(value)}}
  />
); };

<AsyncDataTableEntries />
</Tabs.Tab>

<Tabs.Tab>
```jsx copy
<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
  horizontalBorder
  defaultEntries={10}
  handleNoOfEntriesChange={(value) => {console.log(value)}}
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Table with Pagination Component
The Pagination component enhances the usability of the async datatable by providing intuitive navigation controls for browsing through multiple pages of data. It allows users to efficiently navigate large datasets, improving overall user experience and interaction with the datatable.

The Pagination component is seamlessly integrated into the async datatable, automatically rendering when the `totalPages`, `currentPage` and `handlePageChange` props are provided. It requires no additional configuration, offering a hassle-free solution for managing paginated data.

Additionally, if you want to show the info of how many data are showing currently, then you have to pass `noOfEntries` and `totalRecord` props.

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTablePagination = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

  const [dataTableDataSource, setDataTableDataSource] = useState([
  ...rawDataTableData,
  ]);

  return (
    <AsyncDatatable
      columnDefinitions={dataTableColumns}
      dataSource={dataTableDataSource}
      horizontalBorder
      verticalBorder
      totalPages={8}
      currentPage={1}
      noOfEntries={10}
      totalRecord={200}
      handlePageChange={(value) => console.log(value)}
    />
  );
};

  <AsyncDataTablePagination />
</Tabs.Tab>

<Tabs.Tab>
```jsx copy
<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
  horizontalBorder
  verticalBorder
  totalPages={8}
  currentPage={1}
  noOfEntries={10}
  totalRecord={200}
  handlePageChange={(value) => console.log(value)}
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Overflow Scroll Behavior
The Async Datatable component supports customizable overflow scroll behavior, allowing developers to specify the desired width and height using an object format `{x: number, y: number}`. This feature sets a width and height that is specified and add a scroller to view overflowed data in the datatable which enhances user experience and navigation within large datasets.

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableScroll = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

  const [dataTableDataSource, setDataTableDataSource] = useState([
  ...rawDataTableData,
  ]);

  return (
    <AsyncDatatable
      columnDefinitions={dataTableColumns}
      dataSource={dataTableDataSource}
      horizontalBorder
      verticalBorder
      scroll={{x: 1200, y: 300}}
    />
  );
};

  <AsyncDataTableScroll />
</Tabs.Tab>

<Tabs.Tab>
```jsx copy
<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
  horizontalBorder
  verticalBorder
  scroll={{x: 1200, y: 300}}
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Row Selectable
Async Datatable component supports multiple selection of rows for doing any sort of actions afterwords. You have to pass `isSelectableMulti`, `selectedRows` and `handleOnSelectChange` props to enable this feature. Note that, here, isSelectableMulti is a boolean value, selectedRows expects an array and handleOnSelectChange is the callback function that returns the selectedRows array.

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableSelectedRows = () => {
  const [selectedRows, setSelectedRows] = useState([]);

  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Age",
      dataIndex: "age",
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    }
  ];

  const [dataTableDataSource, setDataTableDataSource] = useState([
  ...rawDataTableData,
  ]);

  const handleOnSelectChange = (selectedRows) => {
    setSelectedRows(selectedRows);
  };

  return (
    <AsyncDatatable
      columnDefinitions={dataTableColumns}
      dataSource={dataTableDataSource}
      horizontalBorder
      verticalBorder
      isSelectableMulti
      selectedRows={selectedRows}
      handleOnSelectChange={(selectedRows) => { setSelectedRows(selectedRows)}}
    />
  );
};

  <AsyncDataTableSelectedRows />
</Tabs.Tab>

<Tabs.Tab>
```jsx copy
<AsyncDatatable
  columnDefinitions={dataTableColumns}
  dataSource={dataTableDataSource}
  horizontalBorder
  verticalBorder
  isSelectableMulti
  selectedRows={selectedRows}
  handleOnSelectChange={(selectedRows) => { setSelectedRows(selectedRows)}}
/>
  ```
  </Tabs.Tab>
</Tabs>

&nbsp;
### Examples

Example 1

<Tabs items={['Preview', 'Code']}>

<Tabs.Tab>
export const AsyncDataTableEx1 = () => {
  const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
      align: "start",
      width: "20%",
      isSortable: true,
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Office",
      dataIndex: "office",
    },
    {
      title: "Age",
      dataIndex: "age",
      align: "end",
      render: (value) => {
        return (
        <div>{value} years</div>
      )}
    },
    {
      title: "Status",
      dataIndex: "status",
      align: "center",
      render: (value) => {
        return (
          <div
            className={value === "Active" ? "text-[#027A48]" : "text-[#B42318]"}
          >
            {value}
          </div>
      )}
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    },
    {
      title: "Action",
      dataIndex: "action",
      align: "center",
      render: (value) => {
        return (
          <div
            className="flex items-center justify-center"
            
          >
            <DropdownIcon />
          </div>
        )
      }
    }
  ];

  const [dataTableDataSource, setDataTableDataSource] = useState([
  ...rawDataTableData,
  ]);

  const [selectedRows, setSelectedRows] = useState([])

  return (
    <AsyncDatatable
      columnDefinitions={dataTableColumns}
      dataSource={dataTableDataSource}
      isSelectableMulti
      selectedRows={selectedRows}
      handleOnSelectChange={(selectedItems) => setSelectedRows(selectedItems)}
      totalPages={7}
      currentPage={1}
      noOfEntries={10}
      totalRecord={250}
      horizontalBorder
      scroll={{x: 1500}}
      stripped
      stripeColor="#FCFCFD"
      headerWrapperClassName="!bg-gray-50"
      headItemClassName="text-xs border-t-0 px-6 py-3"
      rowItemClassName="text-sm px-6 py-5"
      entriesHeaderClassName="text-gray-900"
      selectEntriesWrapperClassName="rounded-[0.5rem] !border-gray-200 min-w-[2.5rem] bg-white text-gray-900 cursor-pointer"
      handlePageChange={(page) => {
        console.debug(page);
      }}
      paginationNoOfEntriesWrapperClassName={"text-xs text-gray-700"}
      paginationWrapperClassName="text-gray-700"
      paginationButtonClassName="font-semibold text-gray-500 hover:bg-gray-50 hover:text-gray-800"
      paginationButtonSelectedClassName="!bg-gray-50 !text-gray-800"
      paginationPrevBtnClassName=""
      paginationNextBtnClassName=""
      entriesWrapperClassName=""
      entriesHeader={"Items per page"}
      dynamicPreviousText={"Previous"}
      dynamicNextText={"Next"}
      handleNoOfEntriesChange={(pageSize) => {
        console.debug(pageSize);
      }}
    />
  ); };

<AsyncDataTableEx1 />
</Tabs.Tab>

  <Tabs.Tab>
```jsx copy
const dataTableColumns = [
    {
      title: "Name",
      dataIndex: "name",
      align: "start",
      width: "20%",
      isSortable: true,
    },
    {
      title: "Position",
      dataIndex: "position",
      align: "center",
    },
    {
      title: "Office",
      dataIndex: "office",
    },
    {
      title: "Age",
      dataIndex: "age",
      align: "end",
      render: (value) => {
        return (
        <div>{value} years</div>
      )}
    },
    {
      title: "Status",
      dataIndex: "status",
      align: "center",
      render: (value) => {
        return (
          <div
            className={value === "Active" ? "text-[#027A48]" : "text-[#B42318]"}
          >
            {value}
          </div>
      )}
    },
    {
      title: "Start Date",
      dataIndex: "start_date",
    },
    {
      title: "Salary",
      dataIndex: "salary",
    },
    {
      title: "Action",
      dataIndex: "action",
      align: "center",
      render: (value) => {
        return (
          <div
            className="flex items-center justify-center"
            
          >
            <DropdownIcon />
          </div>
        )
      }
    }
  ];

  const [dataTableDataSource, setDataTableDataSource] = useState([
  ...rawDataTableData,
  ]);

  const [selectedRows, setSelectedRows] = useState([])

return (
  <AsyncDatatable
    columnDefinitions={dataTableColumns}
    dataSource={dataTableDataSource}
    isSelectableMulti
    selectedRows={selectedRows}
    handleOnSelectChange={(selectedItems) => setSelectedRows(selectedItems)}
    totalPages={7}
    currentPage={1}
    noOfEntries={10}
    totalRecord={250}
    horizontalBorder
    scroll={{x: 1500}}
    stripped
    stripeColor="#FCFCFD"
    headerWrapperClassName="!bg-gray-50"
    headItemClassName="text-xs border-t-0 px-6 py-3"
    rowItemClassName="text-sm px-6 py-5"
    entriesHeaderClassName="text-gray-900"
    selectEntriesWrapperClassName="rounded-[0.5rem] !border-gray-200 min-w-[2.5rem] bg-white text-gray-900 cursor-pointer"
    handlePageChange={(page) => {
      console.debug(page);
    }}
    paginationNoOfEntriesWrapperClassName={"text-xs text-gray-700"}
    paginationWrapperClassName="text-gray-700"
    paginationButtonClassName="font-semibold text-gray-500 hover:bg-gray-50 hover:text-gray-800"
    paginationButtonSelectedClassName="!bg-gray-50 !text-gray-800"
    paginationPrevBtnClassName=""
    paginationNextBtnClassName=""
    entriesWrapperClassName=""
    entriesHeader={"Items per page"}
    dynamicPreviousText={"Previous"}
    dynamicNextText={"Next"}
    handleNoOfEntriesChange={(pageSize) => {
      console.debug(pageSize);
    }}
  />
); };
  ```
  </Tabs.Tab>
</Tabs>

{/* &nbsp;
### API Reference

{<table>

  <thead>
    <tr>
      <th className="w-[10%]" align="left">Attribute</th>
      <th className="w-[50%]" align="left">Type</th>
      <th className="w-[30%]" align="left">Description</th>
      <th className="w-[10%]" align="left">Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>children</td>
      <td>ReactNode</td>
      <td>Displays RadioButton content</td>
      <td> - </td>
    </tr>
    <tr>
      <td>color</td>
      <td className="flex flex-wrap gap-y-2 border-none">
        <span className="badge">primary</span>   
        <span className="badge">secondary</span>  
        <span className="badge">accent</span>  
        <span className="badge">success</span>  
        <span className="badge">warning</span>  
        <span className="badge">danger</span>  
      </td>
      <td>Changes RadioButton color</td>
      <td><span className="badge">primary</span></td>
    </tr>
    <tr>
      <td>Group</td>
      <td className="flex flex-wrap gap-y-2 border-none">
      </td>
      <td>[]</td>
      <td><span className="badge">[]</span></td>
    </tr>
     <tr>
      <td>size</td>
      <td>
        <span className="badge">sm</span>  
        <span className="badge">md</span> 
        <span className="badge">lg</span> 
        <span className="badge">xl</span> 
      </td>
      <td>Changes RadioButton size</td>
      <td><span className="badge">md</span></td>
    </tr>
  </tbody>
</table>} */}
